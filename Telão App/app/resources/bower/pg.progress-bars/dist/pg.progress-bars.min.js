/*! pg.progress-bars v0.2.1 | Pavel Grinchenko <psdcoder@gmail.com> | (c) 2015 */
angular.module("pg.progress-bars",[]),function(){"use strict";function t(t,r,e){var n=t.getClasses(),s={container:n.container||"progress__container",bar:n.bar||"progress__bar",barShowing:n.barShowing||"progress__container_showing"};return{restrict:"EA",template:'<div class="'+s.container+'"><div class="'+s.bar+'"></div></div>',scope:{name:"@",minimum:"@",speed:"@",trickleRate:"@",trickleSpeed:"@",animation:"@"},link:function(t,n){if(!t.name)throw new Error('You must specify "name" property for progress bar');n.attr("id","progress-bar-"+t.name);var i=e(t.name,{container:n,bar:n.find("div")},{minimum:+t.minimum,speed:+t.speed,animation:t.animation,trickleRate:+t.trickleRate,trickleSpeed:+t.trickleSpeed,showingClass:s.barShowing});r._register(i),t.$on("$destroy",function(){r._unregister(i)})}}}angular.module("pg.progress-bars").directive("pgProgressBar",t),t.$inject=["ProgressBarsSettings","ProgressBarsStorage","ProgressBarFactory"]}(),function(){"use strict";function t(){return function(t,e,n){return new r(t,e,n)}}function r(t,r,e){if(!t)throw new Error("You must specify name for ProgressBar");if(!r||!r.container||!r.bar)throw new Error('You must specify elements object with "container" and "bar" dom nodes');e=e||{},this.name=t,this.elements=r,this.options={minimum:e.minimum||8,speed:e.speed||250,animation:e.animation||"ease-out",trickleRate:e.trickleRate||2,trickleSpeed:e.trickleSpeed||300,showingClass:e.showingClass},this.current=null,this.toStop=!0}angular.module("pg.progress-bars").factory("ProgressBarFactory",t),r.prototype._show=function(){this.elements.container.addClass(this.options.showingClass),this.elements.bar.css("opacity",1)},r.prototype._hide=function(){this.elements.container.removeClass(this.options.showingClass),this.elements.bar.css("opacity",0),this.elements.bar.css("width",0)},r.prototype._clamp=function(t,r,e){return r>t&&(t=r),t>e&&(t=e),t},r.prototype._trickle=function(){var t=Math.sqrt(100-this.current)/5*this.options.trickleRate;return this.inc(Math.random()*t)},r.prototype._positioning=function(t,r,e){return{width:t+"%",transition:"all "+r+"ms "+e}},r.prototype.set=function(t){var r=this;return this._show(),t=this._clamp(t,this.options.minimum,100),this.current=100===t?null:t,setTimeout(function(){var e=r._positioning(t,r.options.speed,r.options.animation);for(var n in e)e.hasOwnProperty(n)&&r.elements.bar.css(n,e[n])},0),100===t&&setTimeout(function(){r.elements.bar.css("transition","all "+r.options.speed+"ms linear"),r.elements.bar.css("opacity",0),setTimeout(function(){r._hide()},r.options.speed)},r.options.speed),this},r.prototype.get=function(){return this.current},r.prototype.start=function(){var t=this;this.toStop=!1,t.current||t.set(0);var r=function(){setTimeout(function(){t.current&&!t.toStop&&(t._trickle(),r())},t.options.trickleSpeed)};return r(),this},r.prototype.isInProgress=function(){return!this.toStop},r.prototype.stop=function(){return this.toStop=!0,this},r.prototype.inc=function(t){return this.current?("number"!=typeof t&&(t=this._clamp(Math.random()*(100-this.current)/3,10,95)),this.current=this._clamp(this.current+t,0,99.4),this.set(this.current),this):this.start()},r.prototype.done=function(){return this.current&&this.inc(30+50*Math.random()).set(100),this}}(),function(){"use strict";function t(){var t={};return{setContainerClass:function(r){return t.container=r,this},setBarClass:function(r){return t.bar=r,this},setShowingClass:function(r){return t.barShowing=r,this},$get:function(){return{getClasses:function(){return t}}}}}angular.module("pg.progress-bars").provider("ProgressBarsSettings",t)}(),function(){"use strict";function t(){var t={};this._register=function(r){t[r.name]=r},this._unregister=function(r){t[r.name]&&delete t[r.name]},this.get=function(r){return t[r]?t[r]:null}}angular.module("pg.progress-bars").service("ProgressBarsStorage",t)}();